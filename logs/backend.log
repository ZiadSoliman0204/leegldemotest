2025-07-22 00:40:34 | INFO     | __main__:main:75 - Starting Law Firm AI Assistant Backend
2025-07-22 00:40:34 | INFO     | __main__:validate_environment:57 - Environment validation passed
2025-07-22 00:40:34 | INFO     | __main__:create_directories:69 - Ensured directory exists: logs
2025-07-22 00:40:34 | INFO     | __main__:create_directories:69 - Ensured directory exists: data
2025-07-22 00:40:34 | INFO     | __main__:create_directories:69 - Ensured directory exists: ./data/chroma_db
2025-07-22 00:40:34 | INFO     | __main__:main:88 - Server configuration: 0.0.0.0:8000 (debug=False)
2025-07-22 00:40:40 | INFO     | backend.main:startup_event:47 - Starting Law Firm AI Assistant API
2025-07-22 00:40:40 | INFO     | backend.main:startup_event:48 - LLM API URL: http://localhost:1234/v1
2025-07-22 00:40:40 | INFO     | backend.main:startup_event:49 - ChromaDB Path: ./data/chroma_db
2025-07-22 00:43:59 | INFO     | __main__:main:75 - Starting Law Firm AI Assistant Backend
2025-07-22 00:43:59 | INFO     | __main__:validate_environment:57 - Environment validation passed
2025-07-22 00:43:59 | INFO     | __main__:create_directories:69 - Ensured directory exists: logs
2025-07-22 00:43:59 | INFO     | __main__:create_directories:69 - Ensured directory exists: data
2025-07-22 00:43:59 | INFO     | __main__:create_directories:69 - Ensured directory exists: ./data/chroma_db
2025-07-22 00:43:59 | INFO     | __main__:main:88 - Server configuration: 0.0.0.0:8000 (debug=False)
2025-07-22 00:44:02 | INFO     | backend.main:startup_event:47 - Starting Law Firm AI Assistant API
2025-07-22 00:44:02 | INFO     | backend.main:startup_event:48 - LLM API URL: http://localhost:1234/v1/chat/completions
2025-07-22 00:44:02 | INFO     | backend.main:startup_event:49 - ChromaDB Path: ./data/chroma_db
2025-07-22 00:49:05 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=44ecb64ac2b3883d, severity_level=INFO, request_id=b73a0872-8343-4cbb-9b2f-13640191ab03, details=Chat request initiated. Message length: 10 chars, RAG enabled: False, selected_docs: all documents, max_tokens: 50, temperature: 0.1
2025-07-22 00:49:05 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=44ecb64ac2b3883d, severity_level=INFO, request_id=b73a0872-8343-4cbb-9b2f-13640191ab03, details=Sending request to LLM API. Enhanced prompt length: 10 chars
2025-07-22 00:49:05 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 00:49:05 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1
2025-07-22 00:49:05 | ERROR    | backend.services.llm_client:chat_completion:114 - Unexpected error calling LLM API: Invalid response format from LLM API
2025-07-22 00:49:05 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_SYSTEM_ERROR, status=error, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=44ecb64ac2b3883d, severity_level=ERROR, request_id=b73a0872-8343-4cbb-9b2f-13640191ab03, details=System error after 0.28s: Unexpected error in chat completion: Failed to call LLM API: Invalid response format from LLM API
2025-07-22 00:49:05 | ERROR    | backend.routes.chat:chat_completion:303 - Unexpected error in chat completion: Failed to call LLM API: Invalid response format from LLM API
2025-07-22 00:50:38 | INFO     | __main__:main:75 - Starting Law Firm AI Assistant Backend
2025-07-22 00:50:38 | INFO     | __main__:validate_environment:57 - Environment validation passed
2025-07-22 00:50:38 | INFO     | __main__:create_directories:69 - Ensured directory exists: logs
2025-07-22 00:50:38 | INFO     | __main__:create_directories:69 - Ensured directory exists: data
2025-07-22 00:50:38 | INFO     | __main__:create_directories:69 - Ensured directory exists: ./data/chroma_db
2025-07-22 00:50:38 | INFO     | __main__:main:88 - Server configuration: 0.0.0.0:8000 (debug=False)
2025-07-22 00:50:42 | INFO     | backend.main:startup_event:47 - Starting Law Firm AI Assistant API
2025-07-22 00:50:42 | INFO     | backend.main:startup_event:48 - LLM API URL: http://localhost:1234/v1/chat/completions
2025-07-22 00:50:42 | INFO     | backend.main:startup_event:49 - ChromaDB Path: ./data/chroma_db
2025-07-22 00:51:42 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=581d43745726e0ee, severity_level=INFO, request_id=9cd89d3d-11e1-4ba2-971a-f4b40fe35304, details=Chat request initiated. Message length: 3 chars, RAG enabled: True, selected_docs: all documents, max_tokens: 2048, temperature: 0.7
2025-07-22 00:51:42 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: Hey...
2025-07-22 00:51:42 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=581d43745726e0ee, severity_level=INFO, request_id=9cd89d3d-11e1-4ba2-971a-f4b40fe35304, details=Starting RAG document search for query hash: 581d43745726e0ee
2025-07-22 00:51:42 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=581d43745726e0ee, severity_level=INFO, request_id=9cd89d3d-11e1-4ba2-971a-f4b40fe35304, details=No relevant documents found above similarity threshold (0.7)
2025-07-22 00:51:42 | INFO     | backend.routes.chat:chat_completion:179 - No relevant documents found in RAG search
2025-07-22 00:51:42 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=581d43745726e0ee, severity_level=INFO, request_id=9cd89d3d-11e1-4ba2-971a-f4b40fe35304, details=Sending request to LLM API. Enhanced prompt length: 3 chars
2025-07-22 00:51:42 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 00:51:42 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 00:51:44 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=581d43745726e0ee, severity_level=INFO, request_id=9cd89d3d-11e1-4ba2-971a-f4b40fe35304, details=Chat completed successfully. Processing time: 2.34s, Response length: 126 chars, Tokens used: 87, RAG documents: 0
2025-07-22 00:51:44 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 2.34 seconds
2025-07-22 00:51:56 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=f250b253990c36b6, severity_level=INFO, request_id=43e5aa32-5ac7-4c90-a12a-4db2df886a75, details=Chat request initiated. Message length: 11 chars, RAG enabled: True, selected_docs: all documents, max_tokens: 2048, temperature: 0.7
2025-07-22 00:51:56 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: I am lawyer...
2025-07-22 00:51:56 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=f250b253990c36b6, severity_level=INFO, request_id=43e5aa32-5ac7-4c90-a12a-4db2df886a75, details=Starting RAG document search for query hash: f250b253990c36b6
2025-07-22 00:51:56 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=f250b253990c36b6, severity_level=INFO, request_id=43e5aa32-5ac7-4c90-a12a-4db2df886a75, details=No relevant documents found above similarity threshold (0.7)
2025-07-22 00:51:56 | INFO     | backend.routes.chat:chat_completion:179 - No relevant documents found in RAG search
2025-07-22 00:51:56 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=f250b253990c36b6, severity_level=INFO, request_id=43e5aa32-5ac7-4c90-a12a-4db2df886a75, details=Sending request to LLM API. Enhanced prompt length: 11 chars
2025-07-22 00:51:56 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 00:51:56 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 00:52:07 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=f250b253990c36b6, severity_level=INFO, request_id=43e5aa32-5ac7-4c90-a12a-4db2df886a75, details=Chat completed successfully. Processing time: 11.16s, Response length: 514 chars, Tokens used: 178, RAG documents: 0
2025-07-22 00:52:07 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 11.16 seconds
2025-07-22 00:53:05 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=581d43745726e0ee, severity_level=INFO, request_id=dbe78427-b31f-479c-805e-632745f2a60b, details=Chat request initiated. Message length: 3 chars, RAG enabled: True, selected_docs: all documents, max_tokens: 2048, temperature: 0.7
2025-07-22 00:53:05 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: Hey...
2025-07-22 00:53:05 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=581d43745726e0ee, severity_level=INFO, request_id=dbe78427-b31f-479c-805e-632745f2a60b, details=Starting RAG document search for query hash: 581d43745726e0ee
2025-07-22 00:53:05 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=581d43745726e0ee, severity_level=INFO, request_id=dbe78427-b31f-479c-805e-632745f2a60b, details=No relevant documents found above similarity threshold (0.7)
2025-07-22 00:53:05 | INFO     | backend.routes.chat:chat_completion:179 - No relevant documents found in RAG search
2025-07-22 00:53:05 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=581d43745726e0ee, severity_level=INFO, request_id=dbe78427-b31f-479c-805e-632745f2a60b, details=Sending request to LLM API. Enhanced prompt length: 3 chars
2025-07-22 00:53:05 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 00:53:05 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 00:53:09 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=581d43745726e0ee, severity_level=INFO, request_id=dbe78427-b31f-479c-805e-632745f2a60b, details=Chat completed successfully. Processing time: 3.90s, Response length: 127 chars, Tokens used: 87, RAG documents: 0
2025-07-22 00:53:09 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 3.90 seconds
2025-07-22 00:53:31 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=31b58154ae93c5f4, severity_level=INFO, request_id=d8a7bca9-fd9b-4583-9a11-010c2c5a03cd, details=Chat request initiated. Message length: 27 chars, RAG enabled: True, selected_docs: all documents, max_tokens: 2048, temperature: 0.7
2025-07-22 00:53:31 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: Yes, tell me any small info...
2025-07-22 00:53:31 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=31b58154ae93c5f4, severity_level=INFO, request_id=d8a7bca9-fd9b-4583-9a11-010c2c5a03cd, details=Starting RAG document search for query hash: 31b58154ae93c5f4
2025-07-22 00:53:31 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=31b58154ae93c5f4, severity_level=INFO, request_id=d8a7bca9-fd9b-4583-9a11-010c2c5a03cd, details=No relevant documents found above similarity threshold (0.7)
2025-07-22 00:53:31 | INFO     | backend.routes.chat:chat_completion:179 - No relevant documents found in RAG search
2025-07-22 00:53:31 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=31b58154ae93c5f4, severity_level=INFO, request_id=d8a7bca9-fd9b-4583-9a11-010c2c5a03cd, details=Sending request to LLM API. Enhanced prompt length: 27 chars
2025-07-22 00:53:31 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 00:53:31 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 00:53:33 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=31b58154ae93c5f4, severity_level=INFO, request_id=d8a7bca9-fd9b-4583-9a11-010c2c5a03cd, details=Chat completed successfully. Processing time: 1.67s, Response length: 79 chars, Tokens used: 84, RAG documents: 0
2025-07-22 00:53:33 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 1.67 seconds
2025-07-22 00:54:39 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=185f8db32271fe25, severity_level=INFO, request_id=c966b869-2c0e-4200-b8d6-b3c46d3290be, details=Chat request initiated. Message length: 5 chars, RAG enabled: True, selected_docs: all documents, max_tokens: 2048, temperature: 0.7
2025-07-22 00:54:39 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: Hello...
2025-07-22 00:54:39 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=185f8db32271fe25, severity_level=INFO, request_id=c966b869-2c0e-4200-b8d6-b3c46d3290be, details=Starting RAG document search for query hash: 185f8db32271fe25
2025-07-22 00:54:39 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=185f8db32271fe25, severity_level=INFO, request_id=c966b869-2c0e-4200-b8d6-b3c46d3290be, details=No relevant documents found above similarity threshold (0.7)
2025-07-22 00:54:39 | INFO     | backend.routes.chat:chat_completion:179 - No relevant documents found in RAG search
2025-07-22 00:54:39 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=185f8db32271fe25, severity_level=INFO, request_id=c966b869-2c0e-4200-b8d6-b3c46d3290be, details=Sending request to LLM API. Enhanced prompt length: 5 chars
2025-07-22 00:54:39 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 00:54:39 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 00:54:42 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=185f8db32271fe25, severity_level=INFO, request_id=c966b869-2c0e-4200-b8d6-b3c46d3290be, details=Chat completed successfully. Processing time: 2.40s, Response length: 147 chars, Tokens used: 91, RAG documents: 0
2025-07-22 00:54:42 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 2.40 seconds
2025-07-22 00:55:00 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=e8d92dd21876de5d, severity_level=INFO, request_id=bff009b5-29da-44be-91be-af29f2d32e3e, details=Chat request initiated. Message length: 32 chars, RAG enabled: True, selected_docs: all documents, max_tokens: 2048, temperature: 0.7
2025-07-22 00:55:00 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: Tell me anything quick about law...
2025-07-22 00:55:00 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=e8d92dd21876de5d, severity_level=INFO, request_id=bff009b5-29da-44be-91be-af29f2d32e3e, details=Starting RAG document search for query hash: e8d92dd21876de5d
2025-07-22 00:55:00 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=e8d92dd21876de5d, severity_level=INFO, request_id=bff009b5-29da-44be-91be-af29f2d32e3e, details=No relevant documents found above similarity threshold (0.7)
2025-07-22 00:55:00 | INFO     | backend.routes.chat:chat_completion:179 - No relevant documents found in RAG search
2025-07-22 00:55:00 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=e8d92dd21876de5d, severity_level=INFO, request_id=bff009b5-29da-44be-91be-af29f2d32e3e, details=Sending request to LLM API. Enhanced prompt length: 32 chars
2025-07-22 00:55:00 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 00:55:00 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 00:55:18 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=e8d92dd21876de5d, severity_level=INFO, request_id=bff009b5-29da-44be-91be-af29f2d32e3e, details=Chat completed successfully. Processing time: 17.79s, Response length: 1245 chars, Tokens used: 340, RAG documents: 0
2025-07-22 00:55:18 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 17.79 seconds
2025-07-22 01:20:49 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=068e9ec162e812b1, severity_level=INFO, request_id=b203b3ee-7369-46b4-b56e-2a753740ad8f, details=Chat request initiated. Message length: 19 chars, RAG enabled: False, selected_docs: all documents, max_tokens: 50, temperature: 0.1
2025-07-22 01:20:49 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=068e9ec162e812b1, severity_level=INFO, request_id=b203b3ee-7369-46b4-b56e-2a753740ad8f, details=Sending request to LLM API. Enhanced prompt length: 19 chars
2025-07-22 01:20:49 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 01:20:49 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:20:52 | ERROR    | backend.services.llm_client:chat_completion:114 - Unexpected error calling LLM API: All connection attempts failed
2025-07-22 01:20:52 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_SYSTEM_ERROR, status=error, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=068e9ec162e812b1, severity_level=ERROR, request_id=b203b3ee-7369-46b4-b56e-2a753740ad8f, details=System error after 2.27s: Unexpected error in chat completion: Failed to call LLM API: All connection attempts failed
2025-07-22 01:20:52 | ERROR    | backend.routes.chat:chat_completion:303 - Unexpected error in chat completion: Failed to call LLM API: All connection attempts failed
2025-07-22 01:27:25 | INFO     | __main__:main:75 - Starting Law Firm AI Assistant Backend
2025-07-22 01:27:25 | INFO     | __main__:validate_environment:57 - Environment validation passed
2025-07-22 01:27:25 | INFO     | __main__:create_directories:69 - Ensured directory exists: logs
2025-07-22 01:27:25 | INFO     | __main__:create_directories:69 - Ensured directory exists: data
2025-07-22 01:27:25 | INFO     | __main__:create_directories:69 - Ensured directory exists: ./data/chroma_db
2025-07-22 01:27:25 | INFO     | __main__:main:88 - Server configuration: 0.0.0.0:8000 (debug=False)
2025-07-22 01:27:30 | INFO     | backend.main:startup_event:47 - Starting Law Firm AI Assistant API
2025-07-22 01:27:30 | INFO     | backend.main:startup_event:48 - LLM API URL: http://localhost:1234/v1/chat/completions
2025-07-22 01:27:30 | INFO     | backend.main:startup_event:49 - ChromaDB Path: ./data/chroma_db
2025-07-22 01:28:45 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=581d43745726e0ee, severity_level=INFO, request_id=5e68782e-9b39-49ce-bbbf-0c71f1ab12b3, details=Chat request initiated. Message length: 3 chars, RAG enabled: True, selected_docs: all documents, max_tokens: 2048, temperature: 0.7
2025-07-22 01:28:45 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: Hey...
2025-07-22 01:28:45 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=581d43745726e0ee, severity_level=INFO, request_id=5e68782e-9b39-49ce-bbbf-0c71f1ab12b3, details=Starting RAG document search for query hash: 581d43745726e0ee
2025-07-22 01:28:45 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=581d43745726e0ee, severity_level=INFO, request_id=5e68782e-9b39-49ce-bbbf-0c71f1ab12b3, details=No relevant documents found above similarity threshold (0.7)
2025-07-22 01:28:45 | INFO     | backend.routes.chat:chat_completion:179 - No relevant documents found in RAG search
2025-07-22 01:28:45 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=581d43745726e0ee, severity_level=INFO, request_id=5e68782e-9b39-49ce-bbbf-0c71f1ab12b3, details=Sending request to LLM API. Enhanced prompt length: 3 chars
2025-07-22 01:28:45 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 01:28:45 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:28:57 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=581d43745726e0ee, severity_level=INFO, request_id=5e68782e-9b39-49ce-bbbf-0c71f1ab12b3, details=Chat completed successfully. Processing time: 12.19s, Response length: 130 chars, Tokens used: 87, RAG documents: 0
2025-07-22 01:28:57 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 12.19 seconds
2025-07-22 01:29:17 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=f3bb9823ad687e4b, severity_level=INFO, request_id=5833723a-020c-475e-b61b-b338739f4438, details=Chat request initiated. Message length: 30 chars, RAG enabled: True, selected_docs: all documents, max_tokens: 2048, temperature: 0.7
2025-07-22 01:29:17 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: I need love, nothing about law...
2025-07-22 01:29:17 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=f3bb9823ad687e4b, severity_level=INFO, request_id=5833723a-020c-475e-b61b-b338739f4438, details=Starting RAG document search for query hash: f3bb9823ad687e4b
2025-07-22 01:29:17 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=f3bb9823ad687e4b, severity_level=INFO, request_id=5833723a-020c-475e-b61b-b338739f4438, details=No relevant documents found above similarity threshold (0.7)
2025-07-22 01:29:17 | INFO     | backend.routes.chat:chat_completion:179 - No relevant documents found in RAG search
2025-07-22 01:29:17 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=f3bb9823ad687e4b, severity_level=INFO, request_id=5833723a-020c-475e-b61b-b338739f4438, details=Sending request to LLM API. Enhanced prompt length: 30 chars
2025-07-22 01:29:17 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 01:29:17 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:29:39 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=f3bb9823ad687e4b, severity_level=INFO, request_id=5833723a-020c-475e-b61b-b338739f4438, details=Chat completed successfully. Processing time: 22.15s, Response length: 1663 chars, Tokens used: 425, RAG documents: 0
2025-07-22 01:29:39 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 22.15 seconds
2025-07-22 01:31:43 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=35ea07218ad79f52, severity_level=INFO, request_id=6d479cdf-67a2-451e-94ef-eae6d131eccf, details=Chat request initiated. Message length: 23 chars, RAG enabled: True, selected_docs: 1 documents, max_tokens: 2048, temperature: 0.7
2025-07-22 01:31:43 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: When was Johnson hired?...
2025-07-22 01:31:43 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=35ea07218ad79f52, severity_level=INFO, request_id=6d479cdf-67a2-451e-94ef-eae6d131eccf, details=Starting RAG document search for query hash: 35ea07218ad79f52
2025-07-22 01:31:43 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=35ea07218ad79f52, severity_level=INFO, request_id=6d479cdf-67a2-451e-94ef-eae6d131eccf, details=No relevant documents found above similarity threshold (0.7)
2025-07-22 01:31:43 | INFO     | backend.routes.chat:chat_completion:179 - No relevant documents found in RAG search
2025-07-22 01:31:43 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=35ea07218ad79f52, severity_level=INFO, request_id=6d479cdf-67a2-451e-94ef-eae6d131eccf, details=Sending request to LLM API. Enhanced prompt length: 23 chars
2025-07-22 01:31:43 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 01:31:43 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:31:46 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=35ea07218ad79f52, severity_level=INFO, request_id=6d479cdf-67a2-451e-94ef-eae6d131eccf, details=Chat completed successfully. Processing time: 3.12s, Response length: 229 chars, Tokens used: 107, RAG documents: 0
2025-07-22 01:31:46 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 3.12 seconds
2025-07-22 01:32:07 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=35ea07218ad79f52, severity_level=INFO, request_id=ffab8807-e693-4d5b-b256-f0a69d031540, details=Chat request initiated. Message length: 23 chars, RAG enabled: False, selected_docs: 1 documents, max_tokens: 2048, temperature: 0.7
2025-07-22 01:32:07 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=35ea07218ad79f52, severity_level=INFO, request_id=ffab8807-e693-4d5b-b256-f0a69d031540, details=Sending request to LLM API. Enhanced prompt length: 23 chars
2025-07-22 01:32:07 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 01:32:07 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:32:11 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=35ea07218ad79f52, severity_level=INFO, request_id=ffab8807-e693-4d5b-b256-f0a69d031540, details=Chat completed successfully. Processing time: 3.74s, Response length: 275 chars, Tokens used: 120, RAG documents: 0
2025-07-22 01:32:11 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 3.74 seconds
2025-07-22 01:32:23 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=39afd4d24f23e356, severity_level=INFO, request_id=55c142fa-000f-4c63-b340-fbf893985df9, details=Chat request initiated. Message length: 33 chars, RAG enabled: False, selected_docs: 1 documents, max_tokens: 2048, temperature: 0.7
2025-07-22 01:32:23 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=39afd4d24f23e356, severity_level=INFO, request_id=55c142fa-000f-4c63-b340-fbf893985df9, details=Sending request to LLM API. Enhanced prompt length: 33 chars
2025-07-22 01:32:23 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 01:32:23 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:32:26 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=39afd4d24f23e356, severity_level=INFO, request_id=55c142fa-000f-4c63-b340-fbf893985df9, details=Chat completed successfully. Processing time: 3.11s, Response length: 182 chars, Tokens used: 110, RAG documents: 0
2025-07-22 01:32:26 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 3.11 seconds
2025-07-22 01:32:47 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=62a7f6d1afa701f0, severity_level=INFO, request_id=8384744a-e7a4-4154-a98e-b6c9bf214b47, details=Chat request initiated. Message length: 15 chars, RAG enabled: True, selected_docs: 1 documents, max_tokens: 2048, temperature: 0.7
2025-07-22 01:32:47 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: what about now?...
2025-07-22 01:32:47 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=62a7f6d1afa701f0, severity_level=INFO, request_id=8384744a-e7a4-4154-a98e-b6c9bf214b47, details=Starting RAG document search for query hash: 62a7f6d1afa701f0
2025-07-22 01:32:47 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=62a7f6d1afa701f0, severity_level=INFO, request_id=8384744a-e7a4-4154-a98e-b6c9bf214b47, details=No relevant documents found above similarity threshold (0.7)
2025-07-22 01:32:47 | INFO     | backend.routes.chat:chat_completion:179 - No relevant documents found in RAG search
2025-07-22 01:32:47 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=62a7f6d1afa701f0, severity_level=INFO, request_id=8384744a-e7a4-4154-a98e-b6c9bf214b47, details=Sending request to LLM API. Enhanced prompt length: 15 chars
2025-07-22 01:32:47 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 01:32:47 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:32:52 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=62a7f6d1afa701f0, severity_level=INFO, request_id=8384744a-e7a4-4154-a98e-b6c9bf214b47, details=Chat completed successfully. Processing time: 4.40s, Response length: 317 chars, Tokens used: 127, RAG documents: 0
2025-07-22 01:32:52 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 4.40 seconds
2025-07-22 01:34:20 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=bd6575fed3cc3a4a, severity_level=INFO, request_id=2181be88-9d45-418e-941d-eb5d59724857, details=Chat request initiated. Message length: 26 chars, RAG enabled: True, selected_docs: 1 documents, max_tokens: 100, temperature: 0.1
2025-07-22 01:34:20 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: Test with document context...
2025-07-22 01:34:20 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=bd6575fed3cc3a4a, severity_level=INFO, request_id=2181be88-9d45-418e-941d-eb5d59724857, details=Starting RAG document search for query hash: bd6575fed3cc3a4a
2025-07-22 01:34:20 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=bd6575fed3cc3a4a, severity_level=INFO, request_id=2181be88-9d45-418e-941d-eb5d59724857, details=No relevant documents found above similarity threshold (0.7)
2025-07-22 01:34:20 | INFO     | backend.routes.chat:chat_completion:179 - No relevant documents found in RAG search
2025-07-22 01:34:20 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=bd6575fed3cc3a4a, severity_level=INFO, request_id=2181be88-9d45-418e-941d-eb5d59724857, details=Sending request to LLM API. Enhanced prompt length: 26 chars
2025-07-22 01:34:20 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 01:34:20 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:34:25 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=bd6575fed3cc3a4a, severity_level=INFO, request_id=2181be88-9d45-418e-941d-eb5d59724857, details=Chat completed successfully. Processing time: 4.79s, Response length: 347 chars, Tokens used: 131, RAG documents: 0
2025-07-22 01:34:25 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 4.79 seconds
2025-07-22 01:34:59 | INFO     | __main__:main:75 - Starting Law Firm AI Assistant Backend
2025-07-22 01:34:59 | INFO     | __main__:validate_environment:57 - Environment validation passed
2025-07-22 01:34:59 | INFO     | __main__:create_directories:69 - Ensured directory exists: logs
2025-07-22 01:34:59 | INFO     | __main__:create_directories:69 - Ensured directory exists: data
2025-07-22 01:34:59 | INFO     | __main__:create_directories:69 - Ensured directory exists: ./data/chroma_db
2025-07-22 01:34:59 | INFO     | __main__:main:88 - Server configuration: 0.0.0.0:8000 (debug=False)
2025-07-22 01:35:03 | INFO     | backend.main:startup_event:47 - Starting Law Firm AI Assistant API
2025-07-22 01:35:03 | INFO     | backend.main:startup_event:48 - LLM API URL: http://localhost:1234/v1/chat/completions
2025-07-22 01:35:03 | INFO     | backend.main:startup_event:49 - ChromaDB Path: ./data/chroma_db
2025-07-22 01:35:16 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=c1010c94f230d64e, severity_level=INFO, request_id=3868aa78-1459-4641-b3ef-d337bbbb7344, details=Chat request initiated. Message length: 28 chars, RAG enabled: True, selected_docs: 1 documents, max_tokens: 100, temperature: 0.1
2025-07-22 01:35:16 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: What does this document say?...
2025-07-22 01:35:16 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=c1010c94f230d64e, severity_level=INFO, request_id=3868aa78-1459-4641-b3ef-d337bbbb7344, details=Starting RAG document search for query hash: c1010c94f230d64e
2025-07-22 01:35:16 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=c1010c94f230d64e, severity_level=INFO, request_id=3868aa78-1459-4641-b3ef-d337bbbb7344, details=No relevant documents found above similarity threshold (0.7)
2025-07-22 01:35:16 | INFO     | backend.routes.chat:chat_completion:179 - No relevant documents found in RAG search
2025-07-22 01:35:16 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=c1010c94f230d64e, severity_level=INFO, request_id=3868aa78-1459-4641-b3ef-d337bbbb7344, details=Sending request to LLM API. Enhanced prompt length: 28 chars
2025-07-22 01:35:16 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 01:35:16 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:35:19 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=c1010c94f230d64e, severity_level=INFO, request_id=3868aa78-1459-4641-b3ef-d337bbbb7344, details=Chat completed successfully. Processing time: 3.46s, Response length: 206 chars, Tokens used: 109, RAG documents: 0
2025-07-22 01:35:19 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 3.46 seconds
2025-07-22 01:36:54 | INFO     | __main__:main:75 - Starting Law Firm AI Assistant Backend
2025-07-22 01:36:54 | INFO     | __main__:validate_environment:57 - Environment validation passed
2025-07-22 01:36:54 | INFO     | __main__:create_directories:69 - Ensured directory exists: logs
2025-07-22 01:36:54 | INFO     | __main__:create_directories:69 - Ensured directory exists: data
2025-07-22 01:36:54 | INFO     | __main__:create_directories:69 - Ensured directory exists: ./data/chroma_db
2025-07-22 01:36:54 | INFO     | __main__:main:88 - Server configuration: 0.0.0.0:8000 (debug=False)
2025-07-22 01:36:58 | INFO     | backend.main:startup_event:47 - Starting Law Firm AI Assistant API
2025-07-22 01:36:58 | INFO     | backend.main:startup_event:48 - LLM API URL: http://localhost:1234/v1/chat/completions
2025-07-22 01:36:58 | INFO     | backend.main:startup_event:49 - ChromaDB Path: ./data/chroma_db
2025-07-22 01:37:03 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=cec53d859d356f1e, severity_level=INFO, request_id=03632a25-7985-4063-a940-78eba0cb92c4, details=Chat request initiated. Message length: 23 chars, RAG enabled: True, selected_docs: 1 documents, max_tokens: 150, temperature: 0.1
2025-07-22 01:37:03 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: What does Case.txt say?...
2025-07-22 01:37:03 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=cec53d859d356f1e, severity_level=INFO, request_id=03632a25-7985-4063-a940-78eba0cb92c4, details=Starting RAG document search for query hash: cec53d859d356f1e
2025-07-22 01:37:03 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=cec53d859d356f1e, severity_level=INFO, request_id=03632a25-7985-4063-a940-78eba0cb92c4, details=No relevant documents found above similarity threshold (0.3)
2025-07-22 01:37:03 | INFO     | backend.routes.chat:chat_completion:179 - No relevant documents found in RAG search
2025-07-22 01:37:03 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=cec53d859d356f1e, severity_level=INFO, request_id=03632a25-7985-4063-a940-78eba0cb92c4, details=Sending request to LLM API. Enhanced prompt length: 23 chars
2025-07-22 01:37:03 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 01:37:03 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:37:06 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=cec53d859d356f1e, severity_level=INFO, request_id=03632a25-7985-4063-a940-78eba0cb92c4, details=Chat completed successfully. Processing time: 3.13s, Response length: 190 chars, Tokens used: 107, RAG documents: 0
2025-07-22 01:37:06 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 3.13 seconds
2025-07-22 01:38:07 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=1d58e4344e6c91a1, severity_level=INFO, request_id=8c576fe3-6b4c-4b9e-a310-b449dec48b2b, details=Chat request initiated. Message length: 30 chars, RAG enabled: True, selected_docs: all documents, max_tokens: 100, temperature: 0.1
2025-07-22 01:38:07 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: What information is available?...
2025-07-22 01:38:07 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=1d58e4344e6c91a1, severity_level=INFO, request_id=8c576fe3-6b4c-4b9e-a310-b449dec48b2b, details=Starting RAG document search for query hash: 1d58e4344e6c91a1
2025-07-22 01:38:07 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=1d58e4344e6c91a1, severity_level=INFO, request_id=8c576fe3-6b4c-4b9e-a310-b449dec48b2b, details=No relevant documents found above similarity threshold (0.3)
2025-07-22 01:38:07 | INFO     | backend.routes.chat:chat_completion:179 - No relevant documents found in RAG search
2025-07-22 01:38:07 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=1d58e4344e6c91a1, severity_level=INFO, request_id=8c576fe3-6b4c-4b9e-a310-b449dec48b2b, details=Sending request to LLM API. Enhanced prompt length: 30 chars
2025-07-22 01:38:07 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 01:38:07 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:38:14 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=1d58e4344e6c91a1, severity_level=INFO, request_id=8c576fe3-6b4c-4b9e-a310-b449dec48b2b, details=Chat completed successfully. Processing time: 6.67s, Response length: 514 chars, Tokens used: 163, RAG documents: 0
2025-07-22 01:38:14 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 6.67 seconds
2025-07-22 01:38:16 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=f94cf724a331614c, severity_level=INFO, request_id=fbd1a2a6-efe4-4d4c-874a-87753563534d, details=Chat request initiated. Message length: 43 chars, RAG enabled: True, selected_docs: 1 documents, max_tokens: 100, temperature: 0.1
2025-07-22 01:38:16 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: What does Final_Exam_-_EPM213s.pdf contain?...
2025-07-22 01:38:16 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=f94cf724a331614c, severity_level=INFO, request_id=fbd1a2a6-efe4-4d4c-874a-87753563534d, details=Starting RAG document search for query hash: f94cf724a331614c
2025-07-22 01:38:16 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=f94cf724a331614c, severity_level=INFO, request_id=fbd1a2a6-efe4-4d4c-874a-87753563534d, details=No relevant documents found above similarity threshold (0.3)
2025-07-22 01:38:16 | INFO     | backend.routes.chat:chat_completion:179 - No relevant documents found in RAG search
2025-07-22 01:38:16 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=f94cf724a331614c, severity_level=INFO, request_id=fbd1a2a6-efe4-4d4c-874a-87753563534d, details=Sending request to LLM API. Enhanced prompt length: 43 chars
2025-07-22 01:38:16 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 01:38:16 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:38:18 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=f94cf724a331614c, severity_level=INFO, request_id=fbd1a2a6-efe4-4d4c-874a-87753563534d, details=Chat completed successfully. Processing time: 2.06s, Response length: 121 chars, Tokens used: 97, RAG documents: 0
2025-07-22 01:38:18 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 2.06 seconds
2025-07-22 01:38:41 | INFO     | __main__:main:75 - Starting Law Firm AI Assistant Backend
2025-07-22 01:38:41 | INFO     | __main__:validate_environment:57 - Environment validation passed
2025-07-22 01:38:41 | INFO     | __main__:create_directories:69 - Ensured directory exists: logs
2025-07-22 01:38:41 | INFO     | __main__:create_directories:69 - Ensured directory exists: data
2025-07-22 01:38:41 | INFO     | __main__:create_directories:69 - Ensured directory exists: ./data/chroma_db
2025-07-22 01:38:41 | INFO     | __main__:main:88 - Server configuration: 0.0.0.0:8000 (debug=False)
2025-07-22 01:38:45 | INFO     | backend.main:startup_event:47 - Starting Law Firm AI Assistant API
2025-07-22 01:38:45 | INFO     | backend.main:startup_event:48 - LLM API URL: http://localhost:1234/v1/chat/completions
2025-07-22 01:38:45 | INFO     | backend.main:startup_event:49 - ChromaDB Path: ./data/chroma_db
2025-07-22 01:38:59 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=1d58e4344e6c91a1, severity_level=INFO, request_id=2510e3b7-7654-4362-a3fb-cf76d57d648b, details=Chat request initiated. Message length: 30 chars, RAG enabled: True, selected_docs: all documents, max_tokens: 100, temperature: 0.1
2025-07-22 01:38:59 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: What information is available?...
2025-07-22 01:38:59 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=1d58e4344e6c91a1, severity_level=INFO, request_id=2510e3b7-7654-4362-a3fb-cf76d57d648b, details=Starting RAG document search for query hash: 1d58e4344e6c91a1
2025-07-22 01:38:59 | INFO     | backend.routes.chat:chat_completion:139 - RAG Debug - Found 5 raw results
2025-07-22 01:38:59 | INFO     | backend.routes.chat:chat_completion:141 - RAG Debug - Result 1: similarity=-0.7936, content=means that running nontrivial code from a DLL entr...
2025-07-22 01:38:59 | INFO     | backend.routes.chat:chat_completion:141 - RAG Debug - Result 2: similarity=-0.8079, content=. . . . . . . . . . . . . . . . . . . . . . . . . ...
2025-07-22 01:38:59 | INFO     | backend.routes.chat:chat_completion:141 - RAG Debug - Result 3: similarity=-0.8285, content=score of the new child, the exist- ing node is upd...
2025-07-22 01:38:59 | INFO     | backend.routes.chat:chat_completion:148 - RAG Debug - After filtering: 0 results above 0.1 threshold
2025-07-22 01:38:59 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=1d58e4344e6c91a1, severity_level=INFO, request_id=2510e3b7-7654-4362-a3fb-cf76d57d648b, details=No relevant documents found above similarity threshold (0.1)
2025-07-22 01:38:59 | INFO     | backend.routes.chat:chat_completion:186 - No relevant documents found in RAG search
2025-07-22 01:38:59 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=1d58e4344e6c91a1, severity_level=INFO, request_id=2510e3b7-7654-4362-a3fb-cf76d57d648b, details=Sending request to LLM API. Enhanced prompt length: 30 chars
2025-07-22 01:38:59 | INFO     | backend.routes.chat:chat_completion:213 - Sending request to remote LLM API
2025-07-22 01:38:59 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:39:05 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=1d58e4344e6c91a1, severity_level=INFO, request_id=2510e3b7-7654-4362-a3fb-cf76d57d648b, details=Chat completed successfully. Processing time: 6.53s, Response length: 514 chars, Tokens used: 163, RAG documents: 0
2025-07-22 01:39:05 | INFO     | backend.routes.chat:chat_completion:241 - Request processed in 6.53 seconds
2025-07-22 01:39:07 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=f94cf724a331614c, severity_level=INFO, request_id=e53adebb-3606-4a28-a075-7be4b5bc0164, details=Chat request initiated. Message length: 43 chars, RAG enabled: True, selected_docs: 1 documents, max_tokens: 100, temperature: 0.1
2025-07-22 01:39:07 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: What does Final_Exam_-_EPM213s.pdf contain?...
2025-07-22 01:39:07 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=f94cf724a331614c, severity_level=INFO, request_id=e53adebb-3606-4a28-a075-7be4b5bc0164, details=Starting RAG document search for query hash: f94cf724a331614c
2025-07-22 01:39:07 | INFO     | backend.routes.chat:chat_completion:139 - RAG Debug - Found 1 raw results
2025-07-22 01:39:07 | INFO     | backend.routes.chat:chat_completion:141 - RAG Debug - Result 1: similarity=-0.9997, content=EPM213s Spring 2025 Ain-Shams University Faculty o...
2025-07-22 01:39:07 | INFO     | backend.routes.chat:chat_completion:148 - RAG Debug - After filtering: 0 results above 0.1 threshold
2025-07-22 01:39:07 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=f94cf724a331614c, severity_level=INFO, request_id=e53adebb-3606-4a28-a075-7be4b5bc0164, details=No relevant documents found above similarity threshold (0.1)
2025-07-22 01:39:07 | INFO     | backend.routes.chat:chat_completion:186 - No relevant documents found in RAG search
2025-07-22 01:39:07 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=f94cf724a331614c, severity_level=INFO, request_id=e53adebb-3606-4a28-a075-7be4b5bc0164, details=Sending request to LLM API. Enhanced prompt length: 43 chars
2025-07-22 01:39:07 | INFO     | backend.routes.chat:chat_completion:213 - Sending request to remote LLM API
2025-07-22 01:39:07 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:39:09 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=f94cf724a331614c, severity_level=INFO, request_id=e53adebb-3606-4a28-a075-7be4b5bc0164, details=Chat completed successfully. Processing time: 2.09s, Response length: 130 chars, Tokens used: 98, RAG documents: 0
2025-07-22 01:39:09 | INFO     | backend.routes.chat:chat_completion:241 - Request processed in 2.09 seconds
2025-07-22 01:39:38 | INFO     | __main__:main:75 - Starting Law Firm AI Assistant Backend
2025-07-22 01:39:38 | INFO     | __main__:validate_environment:57 - Environment validation passed
2025-07-22 01:39:38 | INFO     | __main__:create_directories:69 - Ensured directory exists: logs
2025-07-22 01:39:38 | INFO     | __main__:create_directories:69 - Ensured directory exists: data
2025-07-22 01:39:38 | INFO     | __main__:create_directories:69 - Ensured directory exists: ./data/chroma_db
2025-07-22 01:39:38 | INFO     | __main__:main:88 - Server configuration: 0.0.0.0:8000 (debug=False)
2025-07-22 01:39:41 | INFO     | backend.main:startup_event:47 - Starting Law Firm AI Assistant API
2025-07-22 01:39:41 | INFO     | backend.main:startup_event:48 - LLM API URL: http://localhost:1234/v1/chat/completions
2025-07-22 01:39:41 | INFO     | backend.main:startup_event:49 - ChromaDB Path: ./data/chroma_db
2025-07-22 01:39:48 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=1d58e4344e6c91a1, severity_level=INFO, request_id=a1163484-ce1f-4c97-a2b5-48f44c40c193, details=Chat request initiated. Message length: 30 chars, RAG enabled: True, selected_docs: all documents, max_tokens: 100, temperature: 0.1
2025-07-22 01:39:48 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: What information is available?...
2025-07-22 01:39:48 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=1d58e4344e6c91a1, severity_level=INFO, request_id=a1163484-ce1f-4c97-a2b5-48f44c40c193, details=Starting RAG document search for query hash: 1d58e4344e6c91a1
2025-07-22 01:39:48 | INFO     | backend.routes.chat:chat_completion:139 - RAG Debug - Found 5 raw results
2025-07-22 01:39:48 | INFO     | backend.routes.chat:chat_completion:141 - RAG Debug - Result 1: similarity=0.1032, content=means that running nontrivial code from a DLL entr...
2025-07-22 01:39:48 | INFO     | backend.routes.chat:chat_completion:141 - RAG Debug - Result 2: similarity=0.0998, content=on page 21, I showed a few Cheat Engine Lua script...
2025-07-22 01:39:48 | INFO     | backend.routes.chat:chat_completion:141 - RAG Debug - Result 3: similarity=0.0961, content=. . . . . . . . . . . . . . . . . . . . . . . . . ...
2025-07-22 01:39:48 | INFO     | backend.routes.chat:chat_completion:148 - RAG Debug - After filtering: 1 results above 0.1 threshold
2025-07-22 01:39:48 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_SUCCESS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=1d58e4344e6c91a1, severity_level=INFO, request_id=a1163484-ce1f-4c97-a2b5-48f44c40c193, details=Found 1 relevant documents. Sources: Developing_Autonomous_Bots_for_Online_Games.pdf
2025-07-22 01:39:48 | INFO     | backend.routes.chat:chat_completion:172 - Found 1 relevant documents
2025-07-22 01:39:48 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=6feec78a7770122e, severity_level=INFO, request_id=a1163484-ce1f-4c97-a2b5-48f44c40c193, details=Sending request to LLM API. Enhanced prompt length: 5986 chars
2025-07-22 01:39:48 | INFO     | backend.routes.chat:chat_completion:213 - Sending request to remote LLM API
2025-07-22 01:39:48 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:40:02 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=1d58e4344e6c91a1, severity_level=INFO, request_id=a1163484-ce1f-4c97-a2b5-48f44c40c193, details=Chat completed successfully. Processing time: 14.03s, Response length: 533 chars, Tokens used: 1489, RAG documents: 1
2025-07-22 01:40:02 | INFO     | backend.routes.chat:chat_completion:241 - Request processed in 14.03 seconds
2025-07-22 01:40:04 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=f94cf724a331614c, severity_level=INFO, request_id=44514c78-8a52-4de2-b8f9-c77cd990d108, details=Chat request initiated. Message length: 43 chars, RAG enabled: True, selected_docs: 1 documents, max_tokens: 100, temperature: 0.1
2025-07-22 01:40:04 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: What does Final_Exam_-_EPM213s.pdf contain?...
2025-07-22 01:40:04 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=f94cf724a331614c, severity_level=INFO, request_id=44514c78-8a52-4de2-b8f9-c77cd990d108, details=Starting RAG document search for query hash: f94cf724a331614c
2025-07-22 01:40:04 | INFO     | backend.routes.chat:chat_completion:139 - RAG Debug - Found 1 raw results
2025-07-22 01:40:04 | INFO     | backend.routes.chat:chat_completion:141 - RAG Debug - Result 1: similarity=0.0001, content=EPM213s Spring 2025 Ain-Shams University Faculty o...
2025-07-22 01:40:04 | INFO     | backend.routes.chat:chat_completion:148 - RAG Debug - After filtering: 0 results above 0.1 threshold
2025-07-22 01:40:04 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=f94cf724a331614c, severity_level=INFO, request_id=44514c78-8a52-4de2-b8f9-c77cd990d108, details=No relevant documents found above similarity threshold (0.1)
2025-07-22 01:40:04 | INFO     | backend.routes.chat:chat_completion:186 - No relevant documents found in RAG search
2025-07-22 01:40:04 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=f94cf724a331614c, severity_level=INFO, request_id=44514c78-8a52-4de2-b8f9-c77cd990d108, details=Sending request to LLM API. Enhanced prompt length: 43 chars
2025-07-22 01:40:04 | INFO     | backend.routes.chat:chat_completion:213 - Sending request to remote LLM API
2025-07-22 01:40:04 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:40:06 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=f94cf724a331614c, severity_level=INFO, request_id=44514c78-8a52-4de2-b8f9-c77cd990d108, details=Chat completed successfully. Processing time: 2.04s, Response length: 121 chars, Tokens used: 97, RAG documents: 0
2025-07-22 01:40:06 | INFO     | backend.routes.chat:chat_completion:241 - Request processed in 2.04 seconds
2025-07-22 01:41:10 | INFO     | __main__:main:75 - Starting Law Firm AI Assistant Backend
2025-07-22 01:41:10 | INFO     | __main__:validate_environment:57 - Environment validation passed
2025-07-22 01:41:10 | INFO     | __main__:create_directories:69 - Ensured directory exists: logs
2025-07-22 01:41:10 | INFO     | __main__:create_directories:69 - Ensured directory exists: data
2025-07-22 01:41:10 | INFO     | __main__:create_directories:69 - Ensured directory exists: ./data/chroma_db
2025-07-22 01:41:10 | INFO     | __main__:main:88 - Server configuration: 0.0.0.0:8000 (debug=False)
2025-07-22 01:41:13 | INFO     | backend.main:startup_event:47 - Starting Law Firm AI Assistant API
2025-07-22 01:41:13 | INFO     | backend.main:startup_event:48 - LLM API URL: http://localhost:1234/v1/chat/completions
2025-07-22 01:41:13 | INFO     | backend.main:startup_event:49 - ChromaDB Path: ./data/chroma_db
2025-07-22 01:41:20 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=cec53d859d356f1e, severity_level=INFO, request_id=adb02e4d-0154-42d1-b3ba-c05eacba1fca, details=Chat request initiated. Message length: 23 chars, RAG enabled: True, selected_docs: 1 documents, max_tokens: 100, temperature: 0.1
2025-07-22 01:41:20 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: What does Case.txt say?...
2025-07-22 01:41:20 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=cec53d859d356f1e, severity_level=INFO, request_id=adb02e4d-0154-42d1-b3ba-c05eacba1fca, details=Starting RAG document search for query hash: cec53d859d356f1e
2025-07-22 01:41:20 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=cec53d859d356f1e, severity_level=INFO, request_id=adb02e4d-0154-42d1-b3ba-c05eacba1fca, details=No relevant documents found above similarity threshold (0.001)
2025-07-22 01:41:20 | INFO     | backend.routes.chat:chat_completion:179 - No relevant documents found in RAG search
2025-07-22 01:41:20 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=cec53d859d356f1e, severity_level=INFO, request_id=adb02e4d-0154-42d1-b3ba-c05eacba1fca, details=Sending request to LLM API. Enhanced prompt length: 23 chars
2025-07-22 01:41:20 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 01:41:20 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:41:23 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=cec53d859d356f1e, severity_level=INFO, request_id=adb02e4d-0154-42d1-b3ba-c05eacba1fca, details=Chat completed successfully. Processing time: 3.11s, Response length: 190 chars, Tokens used: 107, RAG documents: 0
2025-07-22 01:41:23 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 3.11 seconds
2025-07-22 01:42:45 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=39afd4d24f23e356, severity_level=INFO, request_id=e240519b-390d-41d1-aaea-3cbd2eb6ac58, details=Chat request initiated. Message length: 33 chars, RAG enabled: True, selected_docs: 1 documents, max_tokens: 2048, temperature: 0.7
2025-07-22 01:42:45 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: Can you read the case I gave you?...
2025-07-22 01:42:45 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=39afd4d24f23e356, severity_level=INFO, request_id=e240519b-390d-41d1-aaea-3cbd2eb6ac58, details=Starting RAG document search for query hash: 39afd4d24f23e356
2025-07-22 01:42:45 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_NO_RESULTS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=39afd4d24f23e356, severity_level=INFO, request_id=e240519b-390d-41d1-aaea-3cbd2eb6ac58, details=No relevant documents found above similarity threshold (0.001)
2025-07-22 01:42:45 | INFO     | backend.routes.chat:chat_completion:179 - No relevant documents found in RAG search
2025-07-22 01:42:45 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=39afd4d24f23e356, severity_level=INFO, request_id=e240519b-390d-41d1-aaea-3cbd2eb6ac58, details=Sending request to LLM API. Enhanced prompt length: 33 chars
2025-07-22 01:42:45 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 01:42:45 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:42:49 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=39afd4d24f23e356, severity_level=INFO, request_id=e240519b-390d-41d1-aaea-3cbd2eb6ac58, details=Chat completed successfully. Processing time: 4.11s, Response length: 273 chars, Tokens used: 129, RAG documents: 0
2025-07-22 01:42:49 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 4.11 seconds
2025-07-22 01:43:15 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_INITIATED, status=initiated, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=4c6291a8ebc537b0, severity_level=INFO, request_id=1ecd1b48-817c-424f-8fef-3bcba478aa0f, details=Chat request initiated. Message length: 23 chars, RAG enabled: True, selected_docs: 1 documents, max_tokens: 3981, temperature: 1.0
2025-07-22 01:43:15 | INFO     | backend.routes.chat:chat_completion:117 - Retrieving RAG context for query: When was johnson hired?...
2025-07-22 01:43:15 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_INITIATED, status=initiated, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=4c6291a8ebc537b0, severity_level=INFO, request_id=1ecd1b48-817c-424f-8fef-3bcba478aa0f, details=Starting RAG document search for query hash: 4c6291a8ebc537b0
2025-07-22 01:43:15 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=RAG_QUERY_SUCCESS, status=success, resource=rag_service, ip_address=127.0.0.1, user_agent=, content_hash=4c6291a8ebc537b0, severity_level=INFO, request_id=1ecd1b48-817c-424f-8fef-3bcba478aa0f, details=Found 1 relevant documents. Sources: Case.txt
2025-07-22 01:43:15 | INFO     | backend.routes.chat:chat_completion:165 - Found 1 relevant documents
2025-07-22 01:43:15 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=LLM_API_CALL_INITIATED, status=initiated, resource=llm_api, ip_address=127.0.0.1, user_agent=, content_hash=8558999e9b699118, severity_level=INFO, request_id=1ecd1b48-817c-424f-8fef-3bcba478aa0f, details=Sending request to LLM API. Enhanced prompt length: 2013 chars
2025-07-22 01:43:15 | INFO     | backend.routes.chat:chat_completion:206 - Sending request to remote LLM API
2025-07-22 01:43:15 | INFO     | backend.services.llm_client:chat_completion:81 - Sending request to LLM API: http://localhost:1234/v1/chat/completions
2025-07-22 01:43:22 | INFO     | backend.routes.chat:log_chat_audit:63 - AUDIT_LOG: action_type=CHAT_COMPLETED, status=success, resource=chat_completion, ip_address=127.0.0.1, user_agent=python-requests/2.31.0, content_hash=4c6291a8ebc537b0, severity_level=INFO, request_id=1ecd1b48-817c-424f-8fef-3bcba478aa0f, details=Chat completed successfully. Processing time: 6.84s, Response length: 363 chars, Tokens used: 549, RAG documents: 1
2025-07-22 01:43:22 | INFO     | backend.routes.chat:chat_completion:234 - Request processed in 6.84 seconds
